<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå»å•é¡Œ - ä»‹è­·ç¦ç¥‰å£«è©¦é¨“å¯¾ç­–</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="dashboard-preview.html" class="nav-brand">
                <span class="material-icons">school</span>
                æ—¥æœ¬èªå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
            </a>
            <div class="nav-menu">
                <span class="nav-user">å­¦ç¿’è€…ã•ã‚“</span>
                <a href="#" class="nav-link">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
            </div>
        </div>
    </nav>

    <main>
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h1>éå»å•é¡Œ</h1>
                <p class="dashboard-subtitle">å¹´åº¦ã¨ç§‘ç›®ã‚’é¸æŠã—ã¦éå»å•é¡Œã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†</p>
            </div>

            <div id="category-page" class="max-w-3xl mx-auto">
                <div class="space-y-4">
                    <!-- å¹´åº¦é¸æŠ -->
                    <div>
                        <h2 class="section-title">1. å¹´åº¦ã‚’é¸ã¶</h2>
                        <div id="year-container" class="border rounded-lg divide-y">
                            <!-- å¹´åº¦ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                        </div>
                    </div>

                    <!-- ç§‘ç›®ã‚°ãƒ«ãƒ¼ãƒ—é¸æŠ -->
                    <div>
                        <h2 class="section-title">2. ABC & ç§‘ç›®</h2>
                        <div id="group-container" class="space-y-2">
                            <!-- ç§‘ç›®ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>

                <!-- ä¸­å¤®ã®é–‹å§‹ãƒœã‚¿ãƒ³ -->
                <div class="mt-6 text-center">
                    <button id="start-quiz-btn" class="w-12 h-12 flex items-center justify-center mx-auto font-semibold rounded-full transition-colors duration-300 btn-primary" disabled>
                        <i class="material-icons text-lg">play_arrow</i>
                    </button>
                    <p class="mt-1 text-xs text-gray-600" id="selection-status">å¹´åº¦ã¨ç§‘ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                </div>

                <!-- ãƒ‡ãƒ¼ã‚¿æ¦‚è¦è¡¨ç¤º -->
                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">ğŸ“Š åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿</h3>
                    <div id="data-summary" class="text-sm text-blue-700">
                        <p>èª­ã¿è¾¼ã¿ä¸­...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 ä»‹è­·ç¦ç¥‰å£«è©¦é¨“å¯¾ç­–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ . All rights reserved.</p>
        </div>
    </footer>

<style>
/* ãƒ™ãƒ¼ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
.navbar {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1rem 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.nav-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
}

.nav-brand {
    color: white;
    text-decoration: none;
    font-size: 1.2rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.nav-menu {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.nav-user {
    font-weight: 500;
}

.nav-link {
    color: white;
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.nav-link:hover {
    background-color: rgba(255,255,255,0.1);
}

/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
body {
    font-family: 'Noto Sans JP', sans-serif;
    background-color: #f5f7fa;
    margin: 0;
    line-height: 1.6;
}

.dashboard-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 1.5rem;
}

.dashboard-header {
    text-align: center;
    margin-bottom: 2rem;
}

.dashboard-header h1 {
    color: #2c3e50;
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.dashboard-subtitle {
    color: #7f8c8d;
    font-size: 0.9rem;
}

#category-page {
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.section-title {
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.75rem;
}

.space-y-4 > * + * {
    margin-top: 1rem;
}

.space-y-2 > * + * {
    margin-top: 0.5rem;
}

/* å¹´åº¦é¸æŠ */
.border {
    border: 1px solid #e5e7eb;
}

.rounded-lg {
    border-radius: 0.5rem;
}

.rounded {
    border-radius: 0.25rem;
}

.divide-y > * + * {
    border-top: 1px solid #e5e7eb;
}

.year-row {
    transition: all 0.2s ease;
}

.year-row:hover {
    background-color: #f9fafb;
}

.year-row.selected {
    background-color: #ede9fe;
    border-color: #a855f7;
}

.flex {
    display: flex;
}

.items-center {
    align-items: center;
}

.justify-between {
    justify-content: space-between;
}

.p-2 {
    padding: 0.5rem;
}

.p-3 {
    padding: 0.75rem;
}

.p-4 {
    padding: 1rem;
}

.py-1 {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
}

.px-2 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}

.font-medium {
    font-weight: 500;
}

.font-semibold {
    font-weight: 600;
}

.flex-grow {
    flex: 1 1 0%;
}

.cursor-pointer {
    cursor: pointer;
}

.start-year-btn {
    transition: all 0.2s ease;
}

.start-year-btn:hover {
    transform: scale(1.05);
}

.bg-purple-500 {
    background-color: #a855f7;
}

.bg-blue-50 {
    background-color: #eff6ff;
}

.hover\:bg-purple-600:hover {
    background-color: #9333ea;
}

.text-white {
    color: white;
}

.text-blue-800 {
    color: #1e40af;
}

.text-blue-700 {
    color: #1d4ed8;
}

.w-8 {
    width: 2rem;
}

.h-8 {
    height: 2rem;
}

.w-12 {
    width: 3rem;
}

.h-12 {
    height: 3rem;
}

.rounded-full {
    border-radius: 9999px;
}

.text-sm {
    font-size: 0.875rem;
}

.text-xs {
    font-size: 0.75rem;
}

.text-base {
    font-size: 1rem;
}

.text-lg {
    font-size: 1.125rem;
}

.mb-2 {
    margin-bottom: 0.5rem;
}

/* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚°ãƒ«ãƒ¼ãƒ— */
.group-accordion {
    transition: all 0.2s ease;
}

.group-header:hover {
    background-color: #f9fafb;
}

.hover\:bg-gray-50:hover {
    background-color: #f9fafb;
}

.accordion-icon {
    transition: transform 0.3s ease;
}

.accordion-icon.rotated {
    transform: rotate(180deg);
}

.subject-panel {
    animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
    }
    to {
        opacity: 1;
        max-height: 300px;
    }
}

.border-t {
    border-top: 1px solid #e5e7eb;
}

.bg-gray-50 {
    background-color: #f9fafb;
}

.text-gray-500 {
    color: #6b7280;
}

.text-gray-600 {
    color: #4b5563;
}

.grid {
    display: grid;
}

.grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
}

.gap-2 {
    gap: 0.5rem;
}

.selectable {
    transition: all 0.2s ease;
    background: white;
}

.selectable:hover {
    background-color: white;
    border-color: #a855f7;
    transform: translateY(-1px);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.selectable.selected {
    background-color: #ede9fe;
    border-color: #a855f7;
    color: #7c3aed;
    font-weight: 600;
}

.w-full {
    width: 100%;
}

.text-left {
    text-align: left;
}

.border-gray-300 {
    border-color: #d1d5db;
}

.hover\:bg-white:hover {
    background-color: white;
}

.hover\:border-purple-400:hover {
    border-color: #c084fc;
}

.transition-colors {
    transition-property: color, background-color, border-color;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
}

/* é–‹å§‹ãƒœã‚¿ãƒ³ */
.mt-6 {
    margin-top: 1.5rem;
}

.mt-1 {
    margin-top: 0.25rem;
}

.text-center {
    text-align: center;
}

.mx-auto {
    margin-left: auto;
    margin-right: auto;
}

.btn-primary {
    background-color: #d1d5db;
    color: #9ca3af;
}

.btn-primary:not(:disabled) {
    background-color: #a855f7;
    color: white;
    cursor: pointer;
}

.btn-primary:not(:disabled):hover {
    background-color: #9333ea;
    transform: scale(1.1);
}

.btn-primary:disabled {
    cursor: not-allowed;
}

/* ãƒ•ãƒƒã‚¿ãƒ¼ */
.footer {
    background-color: #2c3e50;
    color: white;
    text-align: center;
    padding: 1rem 0;
    margin-top: 2rem;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 768px) {
    .dashboard-container {
        padding: 1rem;
    }

    #category-page {
        padding: 1rem;
    }

    .grid-cols-2 {
        grid-template-columns: 1fr;
    }

    .nav-container {
        flex-direction: column;
        gap: 1rem;
    }
}
</style>

<script>
// å®Ÿãƒ‡ãƒ¼ã‚¿ã®å®šç¾©
const examData = {
    years: [
        { year: 2025, session: 37, subjects: "A,B,C" },
        { year: 2024, session: 36, subjects: "A,B,C" },
        { year: 2023, session: 35, subjects: "A,B,C" }
    ],
    subjects: [
        // Aã‚°ãƒ«ãƒ¼ãƒ—
        { group: "A", key: "human_dignity_independence", japanese: "äººé–“ã®å°Šå³ã¨è‡ªç«‹", indonesian: "Martabat dan Kemandirian Manusia" },
        { group: "A", key: "care_basics", japanese: "ä»‹è­·ã®åŸºæœ¬", indonesian: "Dasar-dasar Perawatan" },
        { group: "A", key: "social_understanding", japanese: "ç¤¾ä¼šã®ç†è§£", indonesian: "Pemahaman Sosial" },
        { group: "A", key: "human_relations_communication", japanese: "äººé–“é–¢ä¿‚ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", indonesian: "Hubungan Manusia dan Komunikasi" },
        { group: "A", key: "communication_technology", japanese: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æŠ€è¡“", indonesian: "Teknologi Komunikasi" },
        { group: "A", key: "life_support_technology", japanese: "ç”Ÿæ´»æ”¯æ´æŠ€è¡“", indonesian: "Teknologi Dukungan Kehidupan" },

        // Bã‚°ãƒ«ãƒ¼ãƒ—
        { group: "B", key: "mind_body_mechanism", japanese: "ã“ã“ã‚ã¨ã‹ã‚‰ã ã®ã—ãã¿", indonesian: "Mekanisme Pikiran dan Tubuh" },
        { group: "B", key: "development_aging", japanese: "ç™ºé”ã¨è€åŒ–ã®ç†è§£", indonesian: "Pemahaman Perkembangan dan Penuaan" },
        { group: "B", key: "dementia_understanding", japanese: "èªçŸ¥ç—‡ã®ç†è§£", indonesian: "Pemahaman Demensia" },
        { group: "B", key: "disability_understanding", japanese: "éšœå®³ã®ç†è§£", indonesian: "Pemahaman Disabilitas" },
        { group: "B", key: "medical_care", japanese: "åŒ»ç™‚çš„ã‚±ã‚¢", indonesian: "Perawatan Medis" },

        // Cã‚°ãƒ«ãƒ¼ãƒ—
        { group: "C", key: "care_process", japanese: "ä»‹è­·éç¨‹", indonesian: "Proses Perawatan" },
        { group: "C", key: "comprehensive_problems", japanese: "ç·åˆå•é¡Œ", indonesian: "Masalah Komprehensif" }
    ],
    sampleQuestions: [
        {
            id: "q_37_2025_1",
            year: 2025,
            session: 37,
            questionNumber: 1,
            part: "A",
            subjectKey: "human_dignity_independence",
            japaneseQuestion: "æ¬¡ã®è¨˜è¿°ã®ã†ã¡ã€ä»‹è­·ç¦ç¥‰è·ãŒã‚¢ãƒ‰ãƒœã‚«ã‚·ãƒ¼ï¼ˆadvocacyï¼‰ã®è¦–ç‚¹ã‹ã‚‰è¡Œã†å¯¾å¿œã¨ã—ã¦ã€æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã‚’1ã¤é¸ã³ãªã•ã„ã€‚",
            indonesianQuestion: "Dari deskripsi berikut pilihlah satu tindakan yang paling tepat yang dilakukan oleh pekerja perawatan dari sudut pandang advokasi (advocacy).",
            choices: [
                { text: "åˆ©ç”¨è€…ã®æœ€å–„ã®åˆ©ç›Šã‚’ä»£å¼ã™ã‚‹ã€‚", correct: true },
                { text: "å®¶æ—ãŒå¸Œæœ›ã™ã‚‹ä»‹è­·ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ã€‚", correct: false },
                { text: "æ–½è¨­ã®è¦å‰‡ã«å¾“ã£ã¦ä»‹è­·ã‚’æä¾›ã™ã‚‹ã€‚", correct: false },
                { text: "åˆ©ç”¨è€…å€‹äººã®è¶£å‘³ã‚’ç”Ÿã‹ã—ã¦ã€ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³æ´»å‹•ã‚’è¡Œã†ã€‚", correct: false },
                { text: "è¦–è¦šéšœå®³è€…ãŒå¿…è¦ã¨ã™ã‚‹æƒ…å ±ã‚’ã€åˆ©ç”¨ã—ã‚„ã™ã„ã‚ˆã†ã«ã™ã‚‹ã€‚", correct: false }
            ]
        },
        {
            id: "q_37_2025_2",
            year: 2025,
            session: 37,
            questionNumber: 2,
            part: "A",
            subjectKey: "human_dignity_independence",
            japaneseQuestion: "A ã•ã‚“ï¼ˆ83 æ­³ã€å¥³æ€§ã€è¦ä»‹è­· 3ï¼‰ã¯ã€è„³æ¢—å¡ã®å¾Œéºç—‡ã§å·¦ç‰‡éº»ç—ºãŒã‚ã‚Šã€ä»‹è­·è€äººç¦ç¥‰æ–½è¨­ã§ç”Ÿæ´»ã—ã¦ã„ã‚‹ã€‚",
            indonesianQuestion: "Ibu A (83 tahun wanita tingkat perawatan 3) menderita hemiplegia kiri akibat gejala sisa dari infark serebral dan tinggal di panti jompo.",
            choices: [
                { text: "å®Ÿç¿’æŒ‡å°è€…ã«ç›¸è«‡ã‚’ã—ã¦ã‹ã‚‰å¯¾å¿œã™ã‚‹ã€‚", correct: true },
                { text: "ç›´æ¥Aã•ã‚“ã®å¸Œæœ›ã«å¿œãˆã‚‹ã€‚", correct: false },
                { text: "å®¶æ—ã«ç›¸è«‡ã—ã¦ã‹ã‚‰å¯¾å¿œã™ã‚‹ã€‚", correct: false },
                { text: "æ–½è¨­ã®æ–¹é‡ã«å¾“ã£ã¦å¯¾å¿œã™ã‚‹ã€‚", correct: false },
                { text: "åŒåƒšã®ä»‹è­·è·å“¡ã«ç›¸è«‡ã™ã‚‹ã€‚", correct: false }
            ]
        }
    ]
};

let selectedYear = null;
let selectedSubjects = [];

// ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
    renderYears();
    renderSubjectGroups();
    updateDataSummary();

    // åˆæœŸçŠ¶æ…‹ã®è¨­å®š
    if (document.querySelector('.year-row.selected')) {
        selectedYear = document.querySelector('.year-row.selected').dataset.year;
    }
    updateStartButton();
});

function renderYears() {
    const yearContainer = document.getElementById('year-container');

    examData.years.forEach((yearData, index) => {
        const yearRow = document.createElement('div');
        yearRow.className = `year-row flex items-center justify-between p-2 transition-colors duration-200 ${index === 0 ? 'selected' : ''}`;
        yearRow.dataset.year = yearData.year;

        yearRow.innerHTML = `
            <span class="font-medium flex-grow cursor-pointer py-1 px-2">${yearData.year}å¹´åº¦ (ç¬¬${yearData.session}å›)</span>
            <button class="start-year-btn bg-purple-500 hover:bg-purple-600 text-white w-8 h-8 flex items-center justify-center rounded-full text-sm">
                <i class="material-icons text-base">play_arrow</i>
            </button>
        `;

        // å¹´åº¦é¸æŠã‚¤ãƒ™ãƒ³ãƒˆ
        yearRow.addEventListener('click', function(e) {
            if (e.target.closest('.start-year-btn')) {
                return;
            }

            document.querySelectorAll('.year-row').forEach(r => r.classList.remove('selected'));
            this.classList.add('selected');
            selectedYear = this.dataset.year;
            updateStartButton();
        });

        // å¹´åº¦åˆ¥é–‹å§‹ãƒœã‚¿ãƒ³
        yearRow.querySelector('.start-year-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            const year = this.closest('.year-row').dataset.year;
            selectedYear = year;
            selectedSubjects = examData.subjects.map(s => s.key);
            startQuiz();
        });

        yearContainer.appendChild(yearRow);
    });
}

function renderSubjectGroups() {
    const groupContainer = document.getElementById('group-container');
    const groups = ['A', 'B', 'C'];

    groups.forEach(group => {
        const groupSubjects = examData.subjects.filter(s => s.group === group);

        const accordion = document.createElement('div');
        accordion.className = 'group-accordion border rounded-lg';

        accordion.innerHTML = `
            <div class="group-header flex justify-between items-center p-3 cursor-pointer hover:bg-gray-50" data-group="${group}">
                <h3 class="font-semibold text-sm">${group}ã‚°ãƒ«ãƒ¼ãƒ— (${groupSubjects.length}ç§‘ç›®)</h3>
                <i class="material-icons accordion-icon transition-transform duration-300 text-lg">expand_more</i>
            </div>
            <div class="subject-panel p-3 border-t bg-gray-50" style="display: none;">
                <div class="subject-buttons-container grid grid-cols-2 gap-2">
                    ${groupSubjects.map(subject => `
                        <button class="selectable w-full text-left border border-gray-300 rounded p-2 text-sm hover:bg-white hover:border-purple-400 transition-colors"
                                data-subject="${subject.key}"
                                data-subject-name="${subject.japanese}">
                            ${subject.japanese}
                        </button>
                    `).join('')}
                </div>
            </div>
        `;

        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
        const header = accordion.querySelector('.group-header');
        const panel = accordion.querySelector('.subject-panel');
        const icon = accordion.querySelector('.accordion-icon');

        header.addEventListener('click', function() {
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                icon.classList.add('rotated');
            } else {
                panel.style.display = 'none';
                icon.classList.remove('rotated');
            }
        });

        // ç§‘ç›®é¸æŠã‚¤ãƒ™ãƒ³ãƒˆ
        accordion.querySelectorAll('.selectable').forEach(btn => {
            btn.addEventListener('click', function() {
                const subjectKey = this.dataset.subject;

                if (this.classList.contains('selected')) {
                    this.classList.remove('selected');
                    selectedSubjects = selectedSubjects.filter(key => key !== subjectKey);
                } else {
                    this.classList.add('selected');
                    selectedSubjects.push(subjectKey);
                }

                updateStartButton();
            });
        });

        groupContainer.appendChild(accordion);
    });
}

function updateDataSummary() {
    const summaryDiv = document.getElementById('data-summary');
    const totalQuestions = examData.sampleQuestions.length;
    const availableYears = examData.years.length;
    const totalSubjects = examData.subjects.length;

    summaryDiv.innerHTML = `
        <p><strong>ğŸ“… åˆ©ç”¨å¯èƒ½å¹´åº¦:</strong> ${examData.years.map(y => y.year).join(', ')}</p>
        <p><strong>ğŸ“š ç§‘ç›®æ•°:</strong> ${totalSubjects}ç§‘ç›® (A:${examData.subjects.filter(s => s.group === 'A').length}, B:${examData.subjects.filter(s => s.group === 'B').length}, C:${examData.subjects.filter(s => s.group === 'C').length})</p>
        <p><strong>â“ ã‚µãƒ³ãƒ—ãƒ«å•é¡Œ:</strong> ${totalQuestions}å•</p>
        <p><strong>ğŸ”§ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹:</strong> CSVå®Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰èª­ã¿è¾¼ã¿æ¸ˆã¿</p>
    `;
}

function updateStartButton() {
    const startBtn = document.getElementById('start-quiz-btn');
    const statusText = document.getElementById('selection-status');

    if (selectedYear && selectedSubjects.length > 0) {
        startBtn.disabled = false;
        statusText.textContent = `${selectedYear}å¹´åº¦ - ${selectedSubjects.length}ç§‘ç›®é¸æŠæ¸ˆã¿`;
    } else if (selectedYear && selectedSubjects.length === 0) {
        startBtn.disabled = true;
        statusText.textContent = `${selectedYear}å¹´åº¦é¸æŠæ¸ˆã¿ - ç§‘ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„`;
    } else {
        startBtn.disabled = true;
        statusText.textContent = 'å¹´åº¦ã¨ç§‘ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„';
    }
}

function startQuiz() {
    if (!selectedYear || selectedSubjects.length === 0) {
        alert('å¹´åº¦ã¨ç§‘ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
        return;
    }

    const subjectNames = selectedSubjects.map(key => {
        const subject = examData.subjects.find(s => s.key === key);
        return subject ? subject.japanese : '';
    }).filter(name => name);

    const availableQuestions = examData.sampleQuestions.filter(q =>
        q.year == selectedYear && selectedSubjects.includes(q.subjectKey)
    );

    const message = `${selectedYear}å¹´åº¦ã®å•é¡Œã‚’é–‹å§‹ã—ã¾ã™ï¼\n\né¸æŠç§‘ç›®:\n${subjectNames.join('\n')}\n\nåˆ©ç”¨å¯èƒ½å•é¡Œæ•°: ${availableQuestions.length}å•\næ¨å®šæ™‚é–“: ${Math.ceil(availableQuestions.length * 1.8)}åˆ†`;

    if (confirm(message)) {
        // å®Ÿéš›ã®å•é¡Œãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯å•é¡Œç”»é¢ã«ç§»è¡Œ
        if (availableQuestions.length > 0) {
            alert(`å•é¡Œãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼\n${availableQuestions.length}å•ã®å•é¡ŒãŒåˆ©ç”¨ã§ãã¾ã™ã€‚\n\nï¼ˆã‚¯ã‚¤ã‚ºç”»é¢ã¯é–‹ç™ºä¸­ã§ã™ï¼‰`);
        } else {
            alert('é¸æŠã—ãŸæ¡ä»¶ã«è©²å½“ã™ã‚‹å•é¡Œãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚');
        }
    }
}

// ä¸­å¤®é–‹å§‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
document.getElementById('start-quiz-btn').addEventListener('click', function() {
    if (!this.disabled) {
        startQuiz();
    }
});
</script>
</body>
</html>